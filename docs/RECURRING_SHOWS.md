# –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è) —à–æ—É

## –û–ø–∏—Å–∞–Ω–∏–µ

–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —à–æ—É - —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã—Ö–æ–¥—è—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å, –ø–æ –±—É–¥–Ω—è–º, –ø–æ –≤—ã—Ö–æ–¥–Ω—ã–º).

## –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —à–æ—É

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–æ—É** (`/commercial/shows`)
2. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å —à–æ—É**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è:
   - –ù–∞–∑–≤–∞–Ω–∏–µ
   - –¢–∏–ø —à–æ—É (—Å–µ—Ä–∏–∞–ª, –Ω–æ–≤–æ—Å—Ç–∏, —É—Ç—Ä–µ–Ω–Ω–µ–µ —à–æ—É –∏ —Ç.–¥.)
   - –í—Ä–µ–º—è –ø–æ–∫–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 09:00-10:00)
   - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –¶–µ–Ω–∞ –∑–∞ –º–∏–Ω—É—Ç—É
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ–∫–±–æ–∫—Å **"–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —à–æ—É (–≤—ã—Ö–æ–¥–∏—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ)"**
5. –í—ã–±–µ—Ä–∏—Ç–µ –¥–Ω–∏ –ø–æ–∫–∞–∑–∞:
   - **–ö–∞–∂–¥—ã–π –¥–µ–Ω—å** - —à–æ—É –∏–¥—ë—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
   - **–ü–æ –±—É–¥–Ω—è–º (–ü–Ω-–ü—Ç)** - —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏
   - **–ü–æ –≤—ã—Ö–æ–¥–Ω—ã–º (–°–±-–í—Å)** - —Ç–æ–ª—å–∫–æ —Å—É–±–±–æ—Ç–∞ –∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ

## –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

–í —Ç–∞–±–ª–∏—Ü–µ —à–æ—É —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ—Ç–º–µ—á–µ–Ω—ã:
- üîÑ **–ë–µ–π–¥–∂–µ–º "–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ"** —Å–∏–Ω–µ–≥–æ —Ü–≤–µ—Ç–∞
- üìÖ **–ò–∫–æ–Ω–∫–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—è** —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –¥–Ω–µ–π –ø–æ–∫–∞–∑–∞

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –£—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏
```
–ù–∞–∑–≤–∞–Ω–∏–µ: –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ
–¢–∏–ø: –ù–æ–≤–æ—Å—Ç–∏
–í—Ä–µ–º—è: 07:00-09:00
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 120 –º–∏–Ω
–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ: ‚úì –ö–∞–∂–¥—ã–π –¥–µ–Ω—å
```

### –°–µ—Ä–∏–∞–ª –≤ –ø—Ä–∞–π–º-—Ç–∞–π–º
```
–ù–∞–∑–≤–∞–Ω–∏–µ: –°–µ—Ä–∏–∞–ª "–í–µ—Å–Ω–∞"
–¢–∏–ø: –°–µ—Ä–∏–∞–ª
–í—Ä–µ–º—è: 21:00-22:00
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 60 –º–∏–Ω
–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ: ‚úì –ü–æ –±—É–¥–Ω—è–º (–ü–Ω-–ü—Ç)
```

### –î–µ—Ç—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
```
–ù–∞–∑–≤–∞–Ω–∏–µ: –°—É–±–±–æ—Ç–Ω–∏–π –º—É–ª—å—Ç–º–∞—Ä–∞—Ñ–æ–Ω
–¢–∏–ø: –î–µ—Ç—Å–∫–æ–µ
–í—Ä–µ–º—è: 10:00-12:00
–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 120 –º–∏–Ω
–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ: ‚úì –ü–æ –≤—ã—Ö–æ–¥–Ω—ã–º (–°–±-–í—Å)
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —à–æ—É –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
2. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è** - –∑—Ä–∏—Ç–µ–ª–∏ –∑–Ω–∞—é—Ç, –∫–æ–≥–¥–∞ –∂–¥–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
3. **–£–¥–æ–±—Å—Ç–≤–æ –¥–ª—è —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª–µ–π** - –ª–µ–≥—á–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É `shows`:
- `is_recurring` (BOOLEAN) - –ø—Ä–∏–∑–Ω–∞–∫ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —à–æ—É
- `recurring_days` (TEXT) - –¥–Ω–∏ –ø–æ–∫–∞–∑–∞: 'daily', 'weekdays', 'weekends'

–°–æ–∑–¥–∞–Ω –∏–Ω–¥–µ–∫—Å: `idx_shows_is_recurring` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ services_feed

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
–Ω–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è-–∏—Å–∫–ª—é—á–µ–Ω–∏—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —É–∫–∞–∑–∞–Ω–∏—é ON CONFLICT
```

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ `services_feed.application_id`:
```sql
ALTER TABLE services_feed 
ADD CONSTRAINT services_feed_application_id_unique UNIQUE (application_id);
```

–¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—è `upsert_services_feed()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `ON CONFLICT (application_id) DO NOTHING`.
