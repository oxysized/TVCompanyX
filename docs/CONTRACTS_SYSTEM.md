# –°–∏—Å—Ç–µ–º–∞ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

## 1. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
```powershell
psql -U postgres -d TVShow
```

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
```sql
\i d:/projectMy/TVCompanyX/docs/db/migrations/2025-10-25-create-contracts-table.sql
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
\d contracts

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏
\df generate_contract_number
\df set_contract_number
\df update_contracts_updated_at

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
SELECT * FROM contracts_number_seq;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–æ–º–µ—Ä–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
SELECT generate_contract_number();
```

## 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –¥–æ–≥–æ–≤–æ—Ä–æ–≤

### –î–ª—è –∞–≥–µ–Ω—Ç–∞

1. **–ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–º –æ—Ç–¥–µ–ª–æ–º:**
   - –°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ `approved`
   - –í —á–∞—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º –ø–æ—è–≤–∏—Ç—Å—è –∑–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–î–æ–≥–æ–≤–æ—Ä"

2. **–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–∞:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–î–æ–≥–æ–≤–æ—Ä"
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –¥–æ–≥–æ–≤–æ—Ä —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º (DOG-2025-001234)
   - –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

3. **–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –¥–æ–≥–æ–≤–æ—Ä:**
   - –ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏
   - –î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ (–∏–º—è, email, —Ç–µ–ª–µ—Ñ–æ–Ω)
   - –ù–∞–∑–≤–∞–Ω–∏–µ —à–æ—É
   - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —ç—Ñ–∏—Ä–∞
   - –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∫–ª–∞–º—ã
   - –°—Ç–æ–∏–º–æ—Å—Ç—å
   - –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏

### –î–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–≥–æ–≤–æ—Ä–æ–≤:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é "–î–æ–∫—É–º–µ–Ω—Ç—ã" –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
   - –£–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤

2. **–°—Ç–∞—Ç—É—Å—ã –¥–æ–≥–æ–≤–æ—Ä–æ–≤:**
   - üîµ **–û—Ç–ø—Ä–∞–≤–ª–µ–Ω** - –¥–æ–≥–æ–≤–æ—Ä —Å–æ–∑–¥–∞–Ω, –Ω–æ –µ—â—ë –Ω–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω
   - üü° **–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω** - –≤—ã –æ—Ç–∫—Ä—ã–ª–∏ –¥–µ—Ç–∞–ª–∏ –¥–æ–≥–æ–≤–æ—Ä–∞
   - üü¢ **–ó–∞–≥—Ä—É–∂–µ–Ω** - –≤—ã —Å–∫–∞—á–∞–ª–∏ –¥–æ–≥–æ–≤–æ—Ä

3. **–î–µ–π—Å—Ç–≤–∏—è —Å –¥–æ–≥–æ–≤–æ—Ä–æ–º:**
   - üëÅÔ∏è **–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å** - –æ—Ç–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª–∏ –¥–æ–≥–æ–≤–æ—Ä–∞
   - üì• **–°–∫–∞—á–∞—Ç—å** - –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä (–æ—Ç–º–µ—Ç–∏—Ç –∫–∞–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π)

## 3. API Endpoints

### GET /api/contracts
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–≥–æ–≤–æ—Ä–æ–≤
```typescript
// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
?customerId=uuid  // —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–ª–∏–µ–Ω—Ç—É
?agentId=uuid     // —Ñ–∏–ª—å—Ç—Ä –ø–æ –∞–≥–µ–Ω—Ç—É

// –û—Ç–≤–µ—Ç
[{
  id: string
  contract_number: string
  show_name: string
  cost: number
  status: 'sent' | 'viewed' | 'downloaded'
  created_at: string
  ...
}]
```

### POST /api/contracts
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–æ–≥–æ–≤–æ—Ä
```typescript
// –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
{
  application_id: string
  customer_id: string
  agent_id: string
  show_name: string
  scheduled_at: string
  duration_seconds: number
  cost: number
  customer_name: string
  customer_email: string
  customer_phone: string
  description?: string
  company_name?: string
}

// –û—Ç–≤–µ—Ç
{
  id: string
  contract_number: string  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: DOG-2025-001234
  ...
}
```

### GET /api/contracts/[id]
–ü–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω –¥–æ–≥–æ–≤–æ—Ä
```typescript
// –û—Ç–≤–µ—Ç
{
  id: string
  contract_number: string
  show_name: string
  ...
}
```

### PATCH /api/contracts/[id]
–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–æ–≥–æ–≤–æ—Ä–∞
```typescript
// –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
{
  status?: 'sent' | 'viewed' | 'downloaded'
  viewed_at?: string
  downloaded_at?: string
}
```

## 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤

### –§–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ –¥–æ–≥–æ–≤–æ—Ä–∞
```
DOG-YYYY-XXXXXX
```
- `DOG` - –ø—Ä–µ—Ñ–∏–∫—Å (–î–æ–≥–æ–≤–æ—Ä)
- `YYYY` - —Ç–µ–∫—É—â–∏–π –≥–æ–¥
- `XXXXXX` - –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä (—Å –≤–µ–¥—É—â–∏–º–∏ –Ω—É–ª—è–º–∏)

### –ü—Ä–∏–º–µ—Ä—ã
- DOG-2025-001000
- DOG-2025-001001
- DOG-2025-001234
- DOG-2026-000001 (–Ω–æ–≤—ã–π –≥–æ–¥ - —Å—á—ë—Ç—á–∏–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è)

### –†–∞–±–æ—Ç–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```sql
-- –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
SELECT last_value FROM contracts_number_seq;

-- –°–ª–µ–¥—É—é—â–∏–π –Ω–æ–º–µ—Ä
SELECT nextval('contracts_number_seq');

-- –°–±—Ä–æ—Å (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
ALTER SEQUENCE contracts_number_seq RESTART WITH 1000;
```

## 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Socket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–æ–≥–æ–≤–æ—Ä–∞ –∫–ª–∏–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
```typescript
socketService.emit('send_notification', {
  userId: customer_id,
  type: 'contract_sent',
  message: `–í–∞–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –¥–æ–≥–æ–≤–æ—Ä ${contract_number}`,
  data: { contractId, applicationId }
})
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –¥–ª—è –æ–¥–Ω–æ–π –∑–∞—è–≤–∫–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–≥–æ–≤–æ—Ä–æ–≤.

### –°–Ω–∏–º–æ–∫ –¥–∞–Ω–Ω—ã—Ö
–î–æ–≥–æ–≤–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ –Ω–µ –≤–ª–∏—è–ª–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã.

## 6. –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (TODO)

1. **PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É: `npm install jspdf`
   - –°–æ–∑–¥–∞—Ç—å endpoint `/api/contracts/[id]/download`
   - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PDF —Å –∫—Ä–∞—Å–∏–≤—ã–º —à–∞–±–ª–æ–Ω–æ–º
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏

2. **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ–≥–æ–≤–æ—Ä –Ω–∞ email –∫–ª–∏–µ–Ω—Ç–∞
   - –í–∫–ª—é—á–∞—Ç—å PDF –≤–æ –≤–ª–æ–∂–µ–Ω–∏–µ

3. **–¶–∏—Ñ—Ä–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å:**
   - –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∏ –¥–æ–≥–æ–≤–æ—Ä–∞ –∫–ª–∏–µ–Ω—Ç–æ–º
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∏

4. **–ê—Ä—Ö–∏–≤:**
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤
   - –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–∞–º

5. **–ü–µ—á–∞—Ç—å:**
   - –í–µ—Ä—Å–∏—è –¥–ª—è –ø–µ—á–∞—Ç–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏
   - QR-–∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏

## 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞
1. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –æ—Ç –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞
2. –ü—Ä–∏–º–∏—Ç–µ –µ—ë –∫–∞–∫ –∞–≥–µ–Ω—Ç
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª
4. –û–¥–æ–±—Ä–∏—Ç–µ –∫–∞–∫ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –æ—Ç–¥–µ–ª
5. –ö–∞–∫ –∞–≥–µ–Ω—Ç - –Ω–∞–∂–º–∏—Ç–µ "–î–æ–≥–æ–≤–æ—Ä"
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–≥–æ–≤–æ—Ä —Å–æ–∑–¥–∞–Ω —Å –Ω–æ–º–µ—Ä–æ–º

### –¢–µ—Å—Ç 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–≥–æ–≤–æ—Ä–∞ –∫–ª–∏–µ–Ω—Ç–æ–º
1. –ó–∞–π–¥–∏—Ç–µ –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç
2. –û—Ç–∫—Ä–æ–π—Ç–µ "–î–æ–∫—É–º–µ–Ω—Ç—ã"
3. –£–≤–∏–¥–∏—Ç–µ –¥–æ–≥–æ–≤–æ—Ä —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–û—Ç–ø—Ä–∞–≤–ª–µ–Ω"
4. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å"
5. –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω"

### –¢–µ—Å—Ç 3: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–∞
1. –í –¥–µ—Ç–∞–ª—è—Ö –¥–æ–≥–æ–≤–æ—Ä–∞ –Ω–∞–∂–º–∏—Ç–µ "–°–∫–∞—á–∞—Ç—å"
2. –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "–ó–∞–≥—Ä—É–∂–µ–Ω"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ timestamps –≤ –±–∞–∑–µ

### SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
```sql
-- –í—Å–µ –¥–æ–≥–æ–≤–æ—Ä—ã
SELECT 
  contract_number,
  customer_name,
  show_name,
  cost,
  status,
  created_at
FROM contracts
ORDER BY created_at DESC;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
SELECT 
  status,
  COUNT(*) as count
FROM contracts
GROUP BY status;

-- –î–æ–≥–æ–≤–æ—Ä—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞—è–≤–∫–µ
SELECT 
  c.contract_number,
  c.customer_name,
  c.show_name,
  c.cost,
  c.status,
  a.status as application_status
FROM contracts c
JOIN applications a ON c.application_id = a.id;
```

## 8. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä
SELECT * FROM pg_trigger WHERE tgname = 'trigger_set_contract_number';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
SELECT generate_contract_number();
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª–∏–∫–∞—Ç—ã –¥–æ–≥–æ–≤–æ—Ä–æ–≤
```sql
-- –ù–∞–π—Ç–∏ –¥—É–±–ª–∏–∫–∞—Ç—ã
SELECT 
  application_id,
  COUNT(*) as count
FROM contracts
GROUP BY application_id
HAVING COUNT(*) > 1;

-- –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã (–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π)
DELETE FROM contracts
WHERE id NOT IN (
  SELECT MIN(id)
  FROM contracts
  GROUP BY application_id
);
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–Ω–æ–ø–∫–∞ "–î–æ–≥–æ–≤–æ—Ä" –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –≤ –±–∞–∑–µ: `SELECT status FROM applications WHERE id = ?`
2. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å `approved`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –≤ `agent/chat.tsx` —Å—Ç—Ä–æ–∫–∏ 630-650

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ API –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏: –≤—Å–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ contracts

## 9. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ API
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ prepared statements (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å)
- ‚úÖ –°–Ω–∏–º–æ–∫ –¥–∞–Ω–Ω—ã—Ö (–∑–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏)

## 10. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–°–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:
```sql
CREATE INDEX idx_contracts_customer_id ON contracts(customer_id);
CREATE INDEX idx_contracts_agent_id ON contracts(agent_id);
CREATE INDEX idx_contracts_application_id ON contracts(application_id);
CREATE INDEX idx_contracts_status ON contracts(status);
CREATE INDEX idx_contracts_created_at ON contracts(created_at);
```

–≠—Ç–∏ –∏–Ω–¥–µ–∫—Å—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –±—ã—Å—Ç—Ä—É—é –≤—ã–±–æ—Ä–∫—É:
- –î–æ–≥–æ–≤–æ—Ä–æ–≤ –ø–æ –∫–ª–∏–µ–Ω—Ç—É
- –î–æ–≥–æ–≤–æ—Ä–æ–≤ –ø–æ –∞–≥–µ–Ω—Ç—É
- –ü–æ —Å—Ç–∞—Ç—É—Å—É
- –ü–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è
